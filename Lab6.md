# №1 Створити матрицю mat з 5 стовпцями та 10 строками за допомогою matrix з випадковими даними (функція rnorm(50)).   

x <- matrix(rnorm(50), ncol=5, nrow=10)   
print(x)   
#rnorm генерує багатовимірні нормальні випадкові змінні в просторі x.   

Резульатт:   
            [,1]        [,2]        [,3]       [,4]       [,5]   
 [1,]  0.3473085 -2.23270536  1.08065099  1.3577427 -1.0050308   
 [2,] -0.7213838 -0.06651734 -0.82868123 -0.1276916  0.5228778   
 [3,]  1.4002181 -0.33394191 -2.18385561 -0.2513806 -0.7982626   
 [4,]  0.2857748  0.04386933 -1.06836603 -0.3643020  1.0417033   
 [5,] -1.0997230  0.02198079  1.17045157  0.1972542 -0.6934808   
 [6,] -0.2377388 -0.91977708  1.97762128  1.4905991 -1.3761043   
 [7,]  1.8800079  1.06899489 -0.97419868  0.7717658  1.2580433   
 [8,] -1.4302916  0.66065538  0.99915480  1.3097469 -1.3466508   
 [9,] -1.1615224  0.62496831  0.03058863 -1.3231528 -1.0000422   
[10,]  0.9687825 -0.55763176 -1.22642173 -0.1787858  0.3949435   
   

# №2 Знайти максимальне значення в кожному стовпці.   

#функція apply() використовується у випадках, коли необхідно застосувати будь-яку функцію до всіх рядків або стовпців матриці (або масивів більшої розмірності)   
#нам треба знайти максимальне значення у КОЖНОМУ стовпці   
#застосувати (X, MARGIN, FUN)   
#-x: масив або матриця   
#-MARGIN: візьміть значення або діапазон від 1 до 2, щоб визначити, де застосувати функцію:   
#-MARGIN=1`: маніпуляція виконується над рядками   
#-MARGIN=2`: маніпуляція виконується над стовпцями   
#-FUN - дія   
   
print(apply(x, 2, max))   

Результат:   
[1] 1.880008 1.068995 1.977621 1.490599 1.258043   

# №3 Знайти середнє (mean) значення кожного стовпця.   
print(apply(x, 2, mean))   

Результат:   
[1]  0.02314321 -0.16901048 -0.10230560  0.28817958 -0.30020037   


# №4 Знайти мінімальне значення в кожному рядку   
print(apply(x, 1, min))   

Результат:   
 [1] -2.2327054 -0.8286812 -2.1838556 -1.0683660 -1.0997230 -1.3761043 -0.9741987 -1.4302916   
 [9] -1.3231528 -1.2264217   


# №5 Відсортувати кожен стовбець таблиці.   
print(apply(x, 2, order))   
#під кодом міститься змінна x, яка включає вектор зі списком чисел. Числа впорядковуються відповідно до його індексу за допомогою order(x)   

Результат:   
      [,1] [,2] [,3] [,4] [,5]   
 [1,]    8    1    3    9    6   
 [2,]    9    6   10    4    8   
 [3,]    5   10    4    3    1   
 [4,]    2    3    7   10    9   
 [5,]    6    2    2    2    3   
 [6,]    4    5    9    5    5   
 [7,]    1    4    8    7   10   
 [8,]   10    9    1    8    2   
 [9,]    3    8    5    1    4   
[10,]    7    7    6    6    7   
   
# №6 Знайти кількість значень < 0 для кожного стовпця. Використати свою функцію.   
a <- function(x)    
  {   
  return (sum(x < 0))   
  }   
   
print(apply(x, 2, a))   

Результат:   
[1] 5 5 5 5 6   
   
# №7 Вивести вектор з булевими значеннями TRUE та FALSE. TRUE, якщо в стовпці є елементи >2, FALSE – якщо немає.   
#булеві змінні, значеннями цього типу можуть бути тільки True або False   
is_any_element_more_than_two <- function(x)    
  {   
  return (sum(x > 2))   
  }   
   
print(apply(x, 2, is_any_element_more_than_two))   
#бачимо, що результат видає бінарною відповіддю, а нам треба булевими змінними   
#будь-яке число, яке не дорівнює нулю (або NA) інтерпретують як «істина».    
#числа, які дорівнюють нулю, порожні об'єкти інтерпретуюють як «хибність».   
   
is_any_element_more_than_two <- function(x)   
  {   
  return (sum(x > 2) > 0)   
  }   

Результат:   
[1] 0 0 0 0 0   
[1] FALSE FALSE FALSE FALSE FALSE   

# №8 Створить список list1 <- list(observationA = c(1:5, 7:3), observationB = matrix(1:6, nrow=2)). Для цього списку знайдіть sum за допомогою lapply.   

list1 <- list(observationA = c(1:5, 7:3), observationB = matrix(1:6, nrow=2))   
print(list1)   
#у першому випадку нас просять створити вектор з чисел спочатку від 1 до 5, потім від 7 до 3   
#у другому випадку нас просять створити матрицю з чисел від 1 до 6 на 2 рядки   
lapply(list1, sum)   
#lapply() використовується за потреби застосування певної функції до кожної компоненти списку. У такому випадку одержують результат у вигляді списку   
#буква “l” в назві lapply() означає list – “список”.   

Результат:   
$observationA   
 [1] 1 2 3 4 5 7 6 5 4 3   
   
$observationB   
     [,1] [,2] [,3]   
[1,]    1    3    5   
[2,]    2    4    6   
$observationA   
[1] 40   
   
$observationB   
[1] 21   

# №9 Для кожного елементу списку list1 знайдіть максимальне та мінімальне значення (range) за допомогою lapply та sapply.   
sapply(list1, range)   

Результат:   
     observationA observationB   
[1,]            1            1   
[2,]            7            6   
   
# №10 Для вбудованого набору даних InsectSprays знайти середнє count для кожного spray.   
#Дані InsectSprays в R показують кількість комах у сільськогосподарських експериментальних одиницях, оброблених шістьма різними інсектизидами.   
#Ми можемо використовувати ці дані, щоб вивчити відносну ефективність різних інсектизидів.   
InsectSprays   
#split розділяє вхідні дані (x) на різні групи (f)   
a <- with(InsectSprays, split(count, spray))   
print(a)   
   
print(sapply(a, mean))   

Результат:   
$A   
 [1] 10  7 20 14 14 12 10 23 17 20 14 13   
   
$B   
 [1] 11 17 21 11 16 14 17 17 19 21  7 13   
   
$C   
 [1] 0 1 7 2 3 1 2 1 3 0 1 4   
   
$D   
 [1]  3  5 12  6  4  3  5  5  5  5  2  4   
   
$E   
 [1] 3 5 3 5 3 6 1 1 3 2 6 4   
   
$F   
 [1] 11  9 15 22 15 16 13 10 26 26 24 13   
   
> print(sapply(a, mean))   
        A         B         C         D         E         F    
14.500000 15.333333  2.083333  4.916667  3.500000 16.666667    
>    
